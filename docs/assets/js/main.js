const arrowUp=document.querySelectorAll(".legend--arrow--up"),arrowDown=document.querySelectorAll(".legend--arrow--down"),designBox=document.querySelector(".js-design"),fillBox=document.querySelector(".js-fill"),formBox=document.querySelector(".js-form"),form=document.querySelector(".container-form"),palette1=document.querySelector(".js-btn-green"),palette2=document.querySelector(".js-btn-red"),palette3=document.querySelector(".js-btn-grey"),motherOfPalettes=document.querySelector(".js-mother-of-palettes"),nameCard=document.querySelector(".preview__name"),jobCard=document.querySelector(".preview__job"),telephoneCard=document.querySelector(".telephone"),emailadressCard=document.querySelector(".emailadress"),linkedinCard=document.querySelector(".linkedin"),gitHubCard=document.querySelector(".github"),resetBtn=document.querySelector(".preview__button"),allInput=document.querySelectorAll(".js-input"),submitBtn=document.querySelector(".js_button_submit"),cardContainer=document.querySelector(".js_card_container"),urlCreateCard=document.querySelector(".js_url"),boxSubmitBtn=document.querySelector(".js_form_box"),cardShareTitle=document.querySelector(".js_card_title"),twitterShare=document.querySelector(".js_twitter"),containerTwitter=document.querySelector(".js_container__twitter"),inputName=document.querySelector(".js_input_name"),inputJob=document.querySelector(".js_input_job"),inputPhoto=document.querySelector(".js_input_photo"),inputEmail=document.querySelector(".js_input_email"),inputPhone=document.querySelector(".js_input_phone"),inputLinkedin=document.querySelector(".js_input_linkedin"),inputGithub=document.querySelector(".js_input_github");function classCollapseDesign(e){e.preventDefault(),arrowDesign(),fillBox.classList.add("collapse"),formBox.classList.add("collapse"),designBox.classList.toggle("collapse")}function arrowDesign(){arrowUp[0].classList.contains("collapse")?(arrowUp[0].classList.remove("collapse"),arrowDown[0].classList.add("collapse")):(arrowUp[0].classList.add("collapse"),arrowDown[0].classList.remove("collapse"))}function classCollapseFill(e){e.preventDefault(),arrowFill(),formBox.classList.add("collapse"),designBox.classList.add("collapse"),fillBox.classList.toggle("collapse")}function arrowFill(){arrowUp[1].classList.contains("collapse")?(arrowUp[1].classList.remove("collapse"),arrowDown[1].classList.add("collapse")):(arrowUp[1].classList.add("collapse"),arrowDown[1].classList.remove("collapse"))}function classCollapseForm(e){e.preventDefault(),arrowForm(),designBox.classList.add("collapse"),fillBox.classList.add("collapse"),formBox.classList.toggle("collapse")}function arrowForm(){arrowUp[2].classList.contains("collapse")?(arrowUp[2].classList.remove("collapse"),arrowDown[2].classList.add("collapse")):(arrowUp[2].classList.add("collapse"),arrowDown[2].classList.remove("collapse"))}arrowUp[0].addEventListener("click",classCollapseDesign),arrowUp[1].addEventListener("click",classCollapseFill),arrowUp[2].addEventListener("click",classCollapseForm),arrowDown[0].addEventListener("click",classCollapseDesign),arrowDown[1].addEventListener("click",classCollapseFill),arrowDown[2].addEventListener("click",classCollapseForm);let data={name:"Nombre Apellido",job:"front-end unicorn",email:"",phone:"",linkedin:"",github:"",photo:"",palette:1};function handleInput(e){e.preventDefault();const t=e.target.name,a=e.target.value;data[t]=a,renderCard(),saveInLocalStorage(data),console.log({elementName:t,value:a})}function renderCard(){telephoneCard.href=data.phone,emailadressCard.href=data.emailadress,gitHubCard.href=data.github,linkedinCard.href=data.linkedin,""===data.name?nameCard.innerHTML="Nombre Apellido":nameCard.innerHTML=data.name,""===data.job?jobCard.innerHTML="front-end unicorn":jobCard.innerHTML=data.job}function cleanPalette(){motherOfPalettes.classList.remove("palette-1"),motherOfPalettes.classList.remove("palette-2"),motherOfPalettes.classList.remove("palette-3")}palette1.addEventListener("click",e=>{cleanPalette(),motherOfPalettes.classList.add("palette-1"),data.palette=1,console.log(e.currentTarget)}),palette2.addEventListener("click",()=>{cleanPalette(),motherOfPalettes.classList.add("palette-2"),data.palette=2}),palette3.addEventListener("click",()=>{cleanPalette(),motherOfPalettes.classList.add("palette-3"),data.palette=3}),form.addEventListener("input",handleInput);const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result}function handleReset(e){e.preventDefault(),cleanForm(),cleanCard(data),renderCard(),cleanPalette(),motherOfPalettes.classList.add("palette-1"),profileImage.style.backgroundImage="",profilePreview.style.backgroundImage="",selectCheck()}function cleanForm(){for(input of allInput)input.value="";localStorage.removeItem("dataFromForm")}function cleanCard(e){for(let t in e)e[t]=""}function selectCheck(){palette1.checked=!0}function handleCreateCard(e){e.preventDefault(),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.success?(markSuccessBtn(),cardContainer.classList.remove("collapse"),cardShareTitle.innerHTML="La tarjeta ha sido creada:",urlCreateCard.innerHTML=e.cardURL,containerTwitter.classList.remove("collapse"),twitterShare.href="https://twitter.com/intent/tweet?text=Esta%20es%20mi%20tarjeta:&url="+e.cardURL):(cardContainer.classList.remove("collapse"),urlCreateCard.innerHTML="No has rellenado todos los campos")})}function markSuccessBtn(){submitBtn.classList.add("successBtn"),boxSubmitBtn.classList.add("successBtn")}function saveInLocalStorage(e){localStorage.setItem("dataFromForm",JSON.stringify(e))}function writeInput(){data=JSON.parse(localStorage.getItem("dataFromForm")),inputName.value=data.name,inputJob.value=data.job,data.photo&&(profileImage.style.backgroundImage=`url(${data.photo})`,profilePreview.style.backgroundImage=`url(${data.photo})`),inputPhone.value=data.phone,inputEmail.value=data.email,inputLinkedin.value=data.linkedin,inputGithub.value=data.github}fileField.addEventListener("change",getImage),resetBtn.addEventListener("click",handleReset),submitBtn.addEventListener("click",handleCreateCard),JSON.parse(localStorage.getItem("dataFromForm"))&&(renderCard(),writeInput());